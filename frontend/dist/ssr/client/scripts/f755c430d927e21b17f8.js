!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VsItineraryStopInfo=e():t.VsItineraryStopInfo=e()}(window,(function(){return(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[219],{"5I+g":function(t,e){},"7Hni":function(t,e,s){"use strict";s("ma9I"),s("TeQF"),s("QWBl"),s("yXV3"),s("rB9j"),s("UxlC"),s("FZtP");var n=s("cDf5"),a=s.n(n),r=s("oqxP"),i=s("FAL7");e.a={name:"VsItineraryStopInfo",status:"prototype",release:"0.0.1",components:{VsIcon:r.default,VsLink:i.default},props:{openingHours:{type:[String,Object],required:!1,default:null},openingTimesLink:{type:String,required:!1,default:null},closedText:{type:String,required:!0},closingSoonText:{type:String,required:!0},openText:{type:String,required:!0},usualText:{type:String,required:!0},provisionalText:{type:String,required:!0},temporarilyClosedText:{type:String,required:!0},toText:{type:String,required:!0},andText:{type:String,required:!0}},data:function(){return{openingMessage:"",currentDayData:{},currentTime:{},dayDataIndex:0,closedLongTerm:!1,ukDate:"",isCurrentTimeframe:!1,parsedHours:{}}},computed:{hoursMessage:function(){var t="";if(this.closedLongTerm)t=this.temporarilyClosedText;else if(this.currentDayData.length>0){switch(this.openingMessage){case"closed":t=this.closedText;break;case"closing soon":t=this.closingSoonText;break;case"open":t=this.openText;break;default:t=""}}return t},provisionalMessage:function(){var t=this,e="";if(void 0!==this.currentDayData[0]){var s="open"===this.currentDayData[0].state?this.openText:this.closedText;e=this.currentDayData[0].provisional?"".concat(this.provisionalText," ").concat(s.toLowerCase()," ").concat(this.currentDayData[0].day):"".concat(this.usualText," ").concat(s.toLowerCase()," ").concat(this.currentDayData[0].day),"closed"!==this.currentDayData[0].state&&void 0!==this.currentDayData[this.dayDataIndex]&&void 0!==this.currentDayData[this.dayDataIndex].startTime&&void 0!==this.currentDayData[this.dayDataIndex].endTime&&""!==this.currentDayData[this.dayDataIndex].startTime&&""!==this.currentDayData[this.dayDataIndex].endTime&&this.currentDayData.forEach((function(s,n){e+=" ".concat(s.startTime," ").concat(t.toText," ").concat(s.endTime),n+1<t.currentDayData.length&&(e+=" ".concat(t.andText," "))}))}return e}},created:function(){this.parseIncomingData(),this.getCurrentTime(),this.isActiveDate(),this.getCurrentHoursInfo()},methods:{parseIncomingData:function(){if("object"!==a()(this.openingHours)){var t=this.openingHours.replace(/'/g,'"');this.parsedHours=JSON.parse(t)}else this.parsedHours=this.openingHours;this.parsedHours.closedLongTerm&&(this.closedLongTerm=!0)},getCurrentTime:function(){var t=new Date,e=t.toLocaleTimeString("en-GB",{timeZone:"Europe/London"});this.ukDate=t.toLocaleDateString("en-GB",{timeZone:"Europe/London"});var s=e.substring(0,2),n=e.substring(3,6),a=t.getDay();this.currentTime.hours=parseInt(s,10),this.currentTime.minutes=parseInt(n,10),this.currentTime.day=a},isActiveDate:function(){if(void 0!==this.parsedHours.period){var t="".concat(this.ukDate.substring(3,5),"/").concat(this.ukDate.substring(0,2),"/").concat(this.ukDate.substring(6,10)),e=new Date(this.parsedHours.period.startDay),s=new Date(this.parsedHours.period.endDay),n=new Date(t);this.isCurrentTimeframe=n<s&&n>e}else this.isCurrentTimeframe=!0},getCurrentHoursInfo:function(){var t=this.returnDayName(this.currentTime.day);if(void 0!==this.parsedHours.days){var e=this.parsedHours.days.filter((function(e){return e.key===t}));void 0!==e&&(this.currentDayData=e,this.compareTimes(this.currentTime,this.currentDayData,this.dayDataIndex))}},compareTimes:function(t,e,s){if(void 0!==e[s].startTime&&void 0!==e[s].endTime&&e[s].startTime.length>0&&e[s].endTime.length>0){var n=e[s].startTime,a=e[s].endTime,r=parseInt(n.substring(0,n.indexOf(":")),10),i=parseInt(n.substring(n.indexOf(":")+1,n.length),10),o=parseInt(a.substring(0,a.indexOf(":")),10),u=parseInt(a.substring(a.indexOf(":")+1,a.length),10),c=this.calculateClosingSoon(o,u);"closed"===e[s].state||r>t.hours||r===t.hours&&i>t.minutes||o<t.hours||o===t.hours&&u<t.minutes?this.openingMessage="closed":this.withinClosingSoonTime(t,c)?this.openingMessage="closing soon":this.openingMessage="open","closed"===this.openingMessage&&e.length>s+1&&(this.dayDataIndex+=1,this.compareTimes(this.currentTime,this.currentDayData,this.dayDataIndex))}else"closed"===e[s].state&&(this.openingMessage="closed")},returnDayName:function(t){var e="";switch(t){case 1:e="monday";break;case 2:e="tuesday";break;case 3:e="wednesday";break;case 4:e="thursday";break;case 5:e="friday";break;case 6:e="saturday";break;case 7:e="sunday";break;default:e=""}return e},calculateClosingSoon:function(t,e){var s,n;return e<30?(s=t-1,n=e-30+60):(s=t,n=e-30),{hours:s,mins:n}},withinClosingSoonTime:function(t,e){return!(e.hours>t.hours||e.hours===t.hours&&e.mins>t.minutes)}}}},A0zz:function(t,e,s){"use strict";var n=s("7Hni");e.a=n.a},Fq74:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vs-itinerary-stop-info",attrs:{"data-test":"vs-itinerary-stop-info"}},[s("VsIcon",{staticClass:"vs-address__map-marker mr-2",attrs:{name:"information"}}),t._v(" "),s("div",[t.isCurrentTimeframe?[t.hoursMessage.length>0?s("p",{staticClass:"itinerary-stop-info__times mb-0",attrs:{"data-test":"vs-itinerary-stop-status"}},[t._v("\n                "+t._s(t.hoursMessage)),s("br")]):t._e(),t._v(" "),!t.closedLongTerm&&void 0!==t.currentDayData[0]&&void 0!==t.currentDayData[0].state&&t.provisionalMessage.length>0?s("p",{attrs:{"data-test":"vs-itinerary-stop-hours"}},[t._v("\n                "+t._s(t.provisionalMessage)+".\n            ")]):t._e()]:t._e(),t._v(" "),this.$slots["stop-link-text"]&&null!==t.openingTimesLink?s("p",{attrs:{"data-test":"vs-stop-link"}},[s("VsLink",{attrs:{href:t.openingTimesLink}},[t._t("stop-link-text")],2)],1):t._e(),t._v(" "),this.$slots["stop-charge-text"]?s("p",{attrs:{"data-test":"vs-stop-charge-text"}},[t._t("stop-charge-text")],2):t._e()],2)],1)},a=[];n._withStripped=!0},GlHH:function(t,e,s){},Ix1A:function(t,e,s){"use strict";var n=s("Fq74");s.d(e,"a",(function(){return n.a})),s.d(e,"b",(function(){return n.b}))},h72m:function(t,e,s){"use strict";var n=s("GlHH");s.n(n).a},iZaw:function(t,e,s){"use strict";s.r(e);var n=s("Ix1A"),a=s("A0zz"),r=(s("h72m"),s("KHd+")),i=s("5I+g"),o=s.n(i),u=Object(r.a)(a.a,n.a,n.b,!1,null,null,null);"function"==typeof o.a&&o()(u),u.options.__file="src/components/patterns/itineraries/components/ItineraryStopInfo.vue",e.default=u.exports}},[["iZaw",0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,17,18,21,20,22,23,24,25,26,28,27,29,30,31,32,33,37,39,38,40,41,42,43,34,35,36,54,56]]])}));